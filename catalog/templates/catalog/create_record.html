{% extends "catalog/base.html" %}
{% block content %}
    <h1 class="text py-3 pt-4">Create record:</h1>
    <style>
        .text {
            font-size: 40px;
            font-weight: bold;
            color: #060007;
        }
    </style>
    <div class="shadow p-3 mb-3 bg-light rounded">
        <form class="form" method="POST" action="">
            {% csrf_token %}
            <table>
                {% for field in record_form %}
                <tr>
                    <td> {{ field.label_tag }} {{ field.errors }} </td>
                    <td> {{ field }} </td>
                </tr>
                {% endfor %}

                <tr><td colspan="2"><hr></td> <tr>
                <tr> <td> <strong> CustomField </strong> </td></tr>
                {% for field in custom_form %}
                    <tr>
                        {% if forloop.counter <= 2 %}
                            <td> {{ field.label_tag }}</td><td> {{ field }} </td> <td> {{ field.errors }} </td><!-- {{ field.id_for_label }} -->
                        {% else %}
                            <td> </td> <td> {{ field }} </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </table>
            <!-- <p id="demo"></p> -->

            <script>
                let elements = ['char', 'text', 'bool', 'int', 'dec'];
                let id_elements = elements.slice().map (i => 'id_cf_' + i);

                window.onload = function(){
                    var choice_type = 'id_type';
                    document.getElementById(choice_type).onchange = function(){
                        for (i = 0; i < elements.length; i++)
                            document.getElementById(id_elements[i]).style.display = (document.getElementById(choice_type).value === elements[i]) ? '' : 'none';
                    };
                    for (i = 0; i < elements.length; i++)
                        document.getElementById(id_elements[i]).style.display = (document.getElementById(choice_type).value === elements[i]) ? '' : 'none';
                };
            </script>
            <input type="submit" name="Submit">
        </form>
        <style>
            .form {
                color: #060007;
            }
        </style>
    </div>
    <div>
        <a class="btn btn-secondary" href="/search">Back to Record List</a>
        <p></p>&nbsp;
    </div>
{% endblock content %}